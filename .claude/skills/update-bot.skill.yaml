name: update-bot
description: Обновление бота на удаленном сервере
instructions: |
  Эта команда автоматизирует процесс обновления бота на удаленном сервере.

  Следуй этим шагам:

  1. КОММИТ ИЗМЕНЕНИЙ:
     - Проверь статус git с помощью `git status` и `git diff`
     - Если есть неотслеживаемые или измененные файлы, добавь их в staging
     - Создай коммит с осмысленным сообщением, описывающим изменения

  2. ПУШ ИЗМЕНЕНИЙ:
     - Отправь изменения на удаленный репозиторий командой `git push`

  3. ОБНОВЛЕНИЕ КОДА НА СЕРВЕРЕ:
     - Команда: `ssh bot "cd ~/Artur/Skuper && git pull"`

  4. ПЕРЕЗАПУСК БОТА В TMUX:
     - Проверь активные tmux сессии: `ssh bot "tmux ls"`
     - Останови текущий процесс бота и запусти новый в tmux сессии 1:
       `ssh bot "cd ~/Artur/Skuper && tmux send-keys -t 1 C-c && sleep 1 && tmux send-keys -t 1 'python main.py' Enter"`

  5. ПРОВЕРКА ЗАПУСКА:
     - Подожди 3 секунды для инициализации
     - Проверь процесс: `ssh bot "ps aux | grep 'python main.py' | grep -v grep"`
     - Посмотри логи tmux: `ssh bot "tmux capture-pane -t 1 -p | tail -20"`
     - Убедись что в логах есть "Budget Bot запущен!" и "Application started"

  ВАЖНО:
  - Если изменений нет НИЧЕГО делать не нужно
   
  - Используй TodoWrite для отслеживания прогресса
  - Проверяй вывод каждой команды на наличие ошибок
  - Если бот не запустился, сообщи об ошибке пользователю
